<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>パズルゲーム</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <!-- p5.js のCDNを追加 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js" integrity="sha512-/o7p4Vb+miE6Fd8FYNi24XbUgG9xIocEkWazlNi0LPXEJpR2+W20J+r/ilWcRdaUwsBjOcwfsfV1UBiCF/EOQg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
    <!-- ロード画面 -->
    <div id="loading-screen">
        <div class="spinner"></div>
        <p>読み込み中...</p>
    </div>

    <!-- プレイヤーコンテナ -->
    <div class="player-container" id="playerContainer">
        <!-- 画像コンテナ -->
        <div class="cover-art-container">
            <div class="cover-art-wrapper">
                <img src="assets/images/puzzles/stage1.jpg" alt="Current Puzzle" class="cover-art current" id="currentImage">
                <img src="assets/images/puzzles/stage1_reveal.jpg" alt="Overlay" class="puzzle-overlay" id="puzzleOverlay">
                <!-- 次の画像は動的に変更 -->
                <img src="" alt="Next Puzzle" class="cover-art next" id="nextImage">
            </div>
            <!-- 動かす部分 -->
            <div class="movable-part" id="movablePart">
                <!-- p5.js のキャンバスがここに描画されます -->
            </div>
        </div>

        <!-- プログレスバー -->
        <div class="progress-bar">
            <div class="progress-bar-bg" id="progressBg">
                <div class="progress-bar-fill" id="progressFill"></div>
                <div class="progress-handle" id="progressHandle"></div>
                <!-- マーカーはJavaScriptで動的に追加 -->
            </div>
            <div class="progress-time">
                <span id="currentTime">0:00</span>
                <span id="totalTime">0:00</span>
            </div>
        </div>

        <!-- トラック情報 -->
        <div class="track-info">
            <div class="track-title" id="trackTitle">問題タイトル</div>
            <div class="track-artist" id="trackArtist">問題サブタイトル</div>
        </div>

        <!-- コントロールボタン -->
        <div class="controls">
            <button class="control-button side-button" id="prevBtn">
                <img src="assets/images/controls/prev.png" alt="Prev" class="control-icon">
            </button>
            <button class="control-button play-button" id="playBtn">
                <img src="assets/images/controls/play.png" alt="Play" class="control-icon" id="playIcon">
            </button>
            <button class="control-button side-button" id="nextBtn">
                <img src="assets/images/controls/next.png" alt="Next" class="control-icon">
            </button>
        </div>

        <!-- 答え表示 -->
        <div class="answer-info" id="answerText">答え: 未表示</div>
    </div>

    <!-- モジュールとしてmain.jsを読み込む -->
    <script type="module" src="assets/js/main.js"></script>
</body>
</html>
